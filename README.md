# vk-pubsub-grpc
Проект реализующий паттерн publisher-subscriber, работающий с использованием gRPC.

## ЗАПУСК
Проект запускается с помощью docker-compose. Dockerfile для сервиса лежит в /build директории. С помощью docker-compose он создастся сам.  
Для запуска потребуется запустить следующую команду в корневой директории проекта:
```bash  
docker-compose up --build
```  
После этой команды у вас соберется образ и контейнер для работы сервиса.
*Обязательно перед поднятием контейнеров заполните конфигурационный файл .env (пример есть в файле .env.example)*

Точка входа - ./cmd/grpcApp/main.go

## Тесты
Для пакета pubsub написаны тесты к каждому из его методов. Что бы протестировать, необходимо перейти в директорию *subpub* и запустить команду:
```bash
go test
```

## Паттерны, использующиеся в проекте
1. Graceful shutdown (используется в методе Close() для корректного завершения всех работающих горутин)
2. Dependency injection (используется в логике, при создании объектов (конструкторы))

## Вопрос
Из ТЗ не совсем понятно, как нужно реализовать общение с gRPC сервисом. Поэтому прилагаю два варианта решения:
1. Если нужно общение клиент-сервер gRPC, то нужно просто поднять контейнер (описание выше),
2. Если нужно общение через http с помощью обычных хендлеров, следовательно необходимо расскоментировать часть кода в файле *docker-compose.yml* и поднять контейнеры той же командой (не забудьте о файле конфигурации).
